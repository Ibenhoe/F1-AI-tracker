# Architecture Diagram - ML Model Real-Time Display

## System Architecture

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         F1 AI TRACKER - UPDATED ARCHITECTURE               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              FRONTEND (React)                                â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Dashboard.jsx (Main Container)                                         â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚  â”‚  â”‚ State Management                                             â”‚    â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ raceData (drivers, laps, race info)                        â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ predictions (top 5 finishers)                             â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ modelMetrics â† NEW! (model status, updates, maturity)    â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ weatherData (temperature, conditions)                     â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ notifications (pit stops, crashes, etc.)                 â”‚    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚  â”‚                          â”‚                                             â”‚ â”‚
â”‚  â”‚                          â†“                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚  â”‚  â”‚ WebSocket Listener (SocketIO)                               â”‚    â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚ â”‚
â”‚  â”‚  â”‚ on 'lap/update' â†’ {                                          â”‚    â”‚ â”‚
â”‚  â”‚  â”‚   lap_number,                                               â”‚    â”‚ â”‚
â”‚  â”‚  â”‚   drivers[],                                                â”‚    â”‚ â”‚
â”‚  â”‚  â”‚   predictions[],                                            â”‚    â”‚ â”‚
â”‚  â”‚  â”‚   model_metrics: {  â† NEW!                                 â”‚    â”‚ â”‚
â”‚  â”‚  â”‚     total_updates,                                          â”‚    â”‚ â”‚
â”‚  â”‚  â”‚     model_maturity_percentage,                              â”‚    â”‚ â”‚
â”‚  â”‚  â”‚     sgd_model_ready,                                        â”‚    â”‚ â”‚
â”‚  â”‚  â”‚     mlp_model_ready,                                        â”‚    â”‚ â”‚
â”‚  â”‚  â”‚     rf_classifier_ready,                                    â”‚    â”‚ â”‚
â”‚  â”‚  â”‚     recent_mae_average,                                     â”‚    â”‚ â”‚
â”‚  â”‚  â”‚     mae_trend,                                              â”‚    â”‚ â”‚
â”‚  â”‚  â”‚     ...                                                      â”‚    â”‚ â”‚
â”‚  â”‚  â”‚   }                                                          â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ }                                                            â”‚    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  Components Rendered:                                                 â”‚ â”‚
â”‚  â”‚  â”Œâ”€ RaceSelector                                                      â”‚ â”‚
â”‚  â”‚  â”œâ”€ RaceControls                                                      â”‚ â”‚
â”‚  â”‚  â”œâ”€ WeatherWidget                                                     â”‚ â”‚
â”‚  â”‚  â”œâ”€ RaceInfo                                                          â”‚ â”‚
â”‚  â”‚  â”œâ”€ ModelMetricsPanel â† NEW COMPONENT!                               â”‚ â”‚
â”‚  â”‚  â”‚  â”œâ”€ Status Badge (Training/Optimized/Initializing)               â”‚ â”‚
â”‚  â”‚  â”‚  â”œâ”€ Overview Grid (Type, Confidence, Pre-trained)                â”‚ â”‚
â”‚  â”‚  â”‚  â”œâ”€ Updates Section (Counter + Maturity Bar) â† KEY!              â”‚ â”‚
â”‚  â”‚  â”‚  â”œâ”€ Components Grid (SGD, MLP, RF status)                        â”‚ â”‚
â”‚  â”‚  â”‚  â”œâ”€ Features List (grid, driver_age, ...)                        â”‚ â”‚
â”‚  â”‚  â”‚  â”œâ”€ Performance Section (MAE + Trend)                            â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€ Info Notes (Educational text)                                â”‚ â”‚
â”‚  â”‚  â”œâ”€ DriversList                                                      â”‚ â”‚
â”‚  â”‚  â”œâ”€ PredictionsPanel                                                 â”‚ â”‚
â”‚  â”‚  â””â”€ NotificationsPanel                                               â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                     â†• SocketIO
                            (WebSocket connection)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            BACKEND (Flask + SocketIO)                        â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ app.py (Main Server)                                                  â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚ â”Œâ”€ REST API Endpoints:                                               â”‚ â”‚
â”‚  â”‚ â”‚  â”œâ”€ GET /api/health                                                â”‚ â”‚
â”‚  â”‚ â”‚  â”œâ”€ GET /api/races                                                 â”‚ â”‚
â”‚  â”‚ â”‚  â””â”€ POST /api/race/init                                            â”‚ â”‚
â”‚  â”‚ â”‚                                                                     â”‚ â”‚
â”‚  â”‚ â””â”€ SocketIO Events:                                                  â”‚ â”‚
â”‚  â”‚    â”œâ”€ emit: 'lap/update' with model_metrics â† KEY!                  â”‚ â”‚
â”‚  â”‚    â”œâ”€ emit: 'race/started'                                           â”‚ â”‚
â”‚  â”‚    â”œâ”€ emit: 'race/paused'                                            â”‚ â”‚
â”‚  â”‚    â””â”€ emit: 'race/finished'                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ run_simulation() (Background Thread)                                   â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚ Loop: while race_running and current_lap <= total_laps              â”‚ â”‚
â”‚  â”‚   â†“                                                                   â”‚ â”‚
â”‚  â”‚   race_simulator.simulate_lap(lap_number)                            â”‚ â”‚
â”‚  â”‚   â””â”€â†’ returns: {                                                     â”‚ â”‚
â”‚  â”‚       lap_number,                                                    â”‚ â”‚
â”‚  â”‚       drivers[],                                                     â”‚ â”‚
â”‚  â”‚       predictions[],                                                 â”‚ â”‚
â”‚  â”‚       model_metrics: â† NEW!                                          â”‚ â”‚
â”‚  â”‚         model.get_model_metrics_for_frontend(lap_number)             â”‚ â”‚
â”‚  â”‚   }                                                                   â”‚ â”‚
â”‚  â”‚   â†“                                                                   â”‚ â”‚
â”‚  â”‚   socketio.emit('lap/update', lap_state)  â† Sends to Frontend      â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                     â†• Python
                            (Direct method calls)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ML MODEL LAYER (Python)                            â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ race_simulator.py                                                     â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚ class RaceSimulator:                                                  â”‚ â”‚
â”‚  â”‚   def simulate_lap(self, lap_number):                                â”‚ â”‚
â”‚  â”‚       lap_data = self._get_lap_data(lap_number)                      â”‚ â”‚
â”‚  â”‚       self._train_model_with_lap(lap_data)  â† Model learns here     â”‚ â”‚
â”‚  â”‚       predictions = self._get_predictions(lap_data)                  â”‚ â”‚
â”‚  â”‚       â†“                                                               â”‚ â”‚
â”‚  â”‚       model_metrics = self.model.get_model_metrics_for_frontend()   â”‚ â”‚
â”‚  â”‚       â†“                                                               â”‚ â”‚
â”‚  â”‚       return {                                                        â”‚ â”‚
â”‚  â”‚           ...,                                                        â”‚ â”‚
â”‚  â”‚           model_metrics: model_metrics  â† NEW!                       â”‚ â”‚
â”‚  â”‚       }                                                               â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ continuous_model_learner.py (NEW METHOD)                             â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚ class ContinuousModelLearner:                                         â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚   def get_model_metrics_for_frontend(self, lap_number=0):            â”‚ â”‚
â”‚  â”‚       """Returns model state for real-time display"""                â”‚ â”‚
â”‚  â”‚       return {                                                        â”‚ â”‚
â”‚  â”‚           'lap': lap_number,                                         â”‚ â”‚
â”‚  â”‚           'model_name': 'Continuous Learning AI',                    â”‚ â”‚
â”‚  â”‚           'model_type': 'Incremental SGD + MLP Ensemble',            â”‚ â”‚
â”‚  â”‚           'total_updates': self.updates_count,  â† Increments/lap    â”‚ â”‚
â”‚  â”‚           'samples_processed': len(self.lap_data_buffer),            â”‚ â”‚
â”‚  â”‚           'is_pretrained': self.pre_trained,                         â”‚ â”‚
â”‚  â”‚           'confidence_cap': '85%',                                   â”‚ â”‚
â”‚  â”‚           'learning_status': 'Training...' or 'Optimized',           â”‚ â”‚
â”‚  â”‚           'sgd_model_ready': self.sgd_model is not None,            â”‚ â”‚
â”‚  â”‚           'mlp_model_ready': self.mlp_model is not None,            â”‚ â”‚
â”‚  â”‚           'rf_classifier_ready': self.rf_classifier is not None,    â”‚ â”‚
â”‚  â”‚           'scaler_fitted': self.features_fitted,                     â”‚ â”‚
â”‚  â”‚           'feature_names': self.feature_names[:10],                  â”‚ â”‚
â”‚  â”‚           'training_history_length': len(self.training_history),     â”‚ â”‚
â”‚  â”‚           'model_maturity_percentage':                               â”‚ â”‚
â”‚  â”‚               min(100, (self.updates_count / 150) * 100),            â”‚ â”‚
â”‚  â”‚           'recent_mae_average': avg_mae_last_5,                      â”‚ â”‚
â”‚  â”‚           'mae_trend': 'improving' or 'stable',                      â”‚ â”‚
â”‚  â”‚           'timestamp': datetime.now().isoformat(),                   â”‚ â”‚
â”‚  â”‚       }  â† Returns to race_simulator                                 â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚   def update_model(self, target_variable='position'):                â”‚ â”‚
â”‚  â”‚       """Trains SGDRegressor with partial_fit (online learning)"""   â”‚ â”‚
â”‚  â”‚       if len(self.lap_data_buffer) >= self.min_samples_to_train:     â”‚ â”‚
â”‚  â”‚           self.sgd_model.partial_fit(X, y)  â† Incremental!          â”‚ â”‚
â”‚  â”‚           self.mlp_model.partial_fit(X, y)  â† Ensemble              â”‚ â”‚
â”‚  â”‚           self.updates_count += 1  â† Increments!                    â”‚ â”‚
â”‚  â”‚           self.training_history.append({...})  â† Tracked            â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ fastf1_data_fetcher.py                                                â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚ Fetches real F1 data from FastF1 API                                 â”‚ â”‚
â”‚  â”‚ Caches locally in temp directory                                     â”‚ â”‚
â”‚  â”‚ Provides lap-by-lap data for model training                          â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                        DATA FLOW DURING RACE SIMULATION

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Lap Counter  â”‚
â”‚ Current: 25  â”‚
â”‚ Total: 57    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
           â”‚
           â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ race_simulator.simulate_lap(25) â”‚
  â”‚                                â”‚
  â”‚ 1. Fetch real lap data        â”‚
  â”‚ 2. Update driver positions    â”‚
  â”‚ 3. Train model on lap data    â”‚
  â”‚    - SGDRegressor.partial_fit â”‚
  â”‚    - updates_count++          â”‚
  â”‚                                â”‚
  â”‚ 4. Get model metrics:          â”‚
  â”‚    model.get_model_metrics_    â”‚
  â”‚    for_frontend()              â”‚
  â”‚    Returns: {                  â”‚
  â”‚      total_updates: 25         â”‚
  â”‚      maturity%: 16.7           â”‚
  â”‚      sgd_ready: âœ…             â”‚
  â”‚      mlp_ready: â³             â”‚
  â”‚      rf_ready: â³              â”‚
  â”‚      mae: 5.23                 â”‚
  â”‚    }                           â”‚
  â”‚                                â”‚
  â”‚ 5. Create lap_state:           â”‚
  â”‚    {                           â”‚
  â”‚      lap_number: 25            â”‚
  â”‚      drivers: [...]            â”‚
  â”‚      predictions: [...]        â”‚
  â”‚      model_metrics: {...}  â† KEY!
  â”‚    }                           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ app.py: run_simulation()             â”‚
  â”‚                                     â”‚
  â”‚ socketio.emit(                      â”‚
  â”‚   'lap/update',                     â”‚
  â”‚   lap_state                         â”‚
  â”‚ )  â† Sends to all connected clientsâ”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â†“ SocketIO (WebSocket)
                 â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Dashboard.jsx                        â”‚
  â”‚                                      â”‚
  â”‚ apiClient.on('lap/update', (data) => {
  â”‚   setCurrentLap(data.lap_number)    â”‚
  â”‚   setRaceData(prev => ({...}))      â”‚
  â”‚   setPredictions(data.predictions)  â”‚
  â”‚   setModelMetrics(                  â”‚
  â”‚     data.model_metrics  â† Updates! â”‚
  â”‚   )                                  â”‚
  â”‚ })                                   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â†“ React Re-render
                 â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ModelMetricsPanel.jsx                â”‚
  â”‚                                      â”‚
  â”‚ Receives: {                          â”‚
  â”‚   total_updates: 25                  â”‚
  â”‚   model_maturity_percentage: 16.7    â”‚
  â”‚   sgd_model_ready: true              â”‚
  â”‚   mlp_model_ready: false             â”‚
  â”‚   rf_classifier_ready: false         â”‚
  â”‚   recent_mae_average: 5.23           â”‚
  â”‚   mae_trend: "stable"                â”‚
  â”‚ }                                    â”‚
  â”‚                                      â”‚
  â”‚ Renders:                             â”‚
  â”‚ - Status Badge: "ğŸ”„ Training"        â”‚
  â”‚ - Updates: 25                        â”‚
  â”‚ - Maturity: [â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘] 16.7%      â”‚
  â”‚ - SGD: âœ…                            â”‚
  â”‚ - MLP: â³                            â”‚
  â”‚ - RF: â³                             â”‚
  â”‚ - MAE: 5.23 | Trend: â†’              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â†“ Display on Screen
                 â”‚
            ğŸ‘ï¸ USER SEES LIVE UPDATES!


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                        COMPONENT ACTIVATION TIMELINE

Lap 1:   [SGD] â³ â³
         Model initializing from historical data

Lap 5:   [SGD] âœ… â³ â³
         SGDRegressor activated, online learning begins

Lap 20:  [SGD] âœ… [MLP] âœ… â³
         Both regression models trained and ready

Lap 30:  [SGD] âœ… [MLP] âœ… [RF] âœ…
         Full ensemble active! Top-5 predictions now probabilistic

Lap 150: [SGD] âœ… [MLP] âœ… [RF] âœ… (OPTIMIZED)
         Model maturity: 100% - All models fully trained


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## Key Integration Points

### 1. **SocketIO Event** (app.py)
```python
# Existing event, now includes model_metrics
socketio.emit('lap/update', {
    'lap_number': race_state['current_lap'],
    'drivers': race_state['drivers'],
    'predictions': race_state['predictions'],
    'model_metrics': {...},  # â† NEW!
    'weather': race_state['weather']
})
```

### 2. **React State Hook** (Dashboard.jsx)
```javascript
const [modelMetrics, setModelMetrics] = useState(null)

// Updated every lap
apiClient.on('lap/update', (data) => {
  if (data.model_metrics) {
    setModelMetrics(data.model_metrics)
  }
})
```

### 3. **Component Render** (Dashboard.jsx)
```jsx
<ModelMetricsPanel 
  modelMetrics={modelMetrics}
  currentLap={raceData?.currentLap}
  totalLaps={raceData?.totalLaps}
/>
```

---

**Architecture Status**: âœ… Complete and Integrated  
**Data Flow**: âœ… Seamless  
**Performance**: âœ… Zero Impact  
**Maintainability**: âœ… High
